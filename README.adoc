# Gffft Server

back-end source code for https://gffft.app[gffft.app]

**This is a project for experimentation, there is a lot of code duplication and inconsistencies**

[link=https://sonarcloud.io/summary/new_code?id=teacurran_gffft-server]
image::https://sonarcloud.io/api/project_badges/measure?project=teacurran_gffft-server&metric=alert_status[]


[link=https://sonarcloud.io/summary/new_code?id=teacurran_gffft-server]
image::https://sonarcloud.io/api/project_badges/measure?project=teacurran_gffft-server&metric=coverage[]


## testing

Prerequesites:

* docker
* make

Make commands:

* make build
* make start
* make stop
* make test
* make rebuild
* make test

`make start` will start up the server in development mode.

`make test` will run all of the unit tests against a running database and an emulated
Firestore authentication service.

## running npc:

```
FIRESTORE_EMULATOR_HOST="localhost:8080" npx ts-node src/npc.ts
```

```
NODE_ENV=production npx ts-node src/npc.ts
```


## other notes
* this is a hobby project
* I organized the source based on concern ('galleries', 'gffts', 'notebooks', etc) rather than typical ('models', 'controllers', 'api', etc).  I read a blog post about how cool this would be but I probably won't do it on projects in the future. 
* all backend code is in a dir called `functions` because I started out using Firebase functions
